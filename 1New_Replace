pipeline {
    agent any
    parameters {
        booleanParam(name: 'Activate_Integration', defaultValue: false, description: 'Check the box if you want Activate the integration after importing')

    }
    stages {
        stage('Activation of Integration') {
            steps {
                script {
					def integName = params.Integration_Identifier.toString()
                    if (params.Activate_Integration) {
                        // Perform action when the checkbox is checked
                        echo 'Checkbox is checked'
						def activateIntegrationCmd = "curl --user ${params.Username}:${params.Password} --header \"Content-Type: application/json\" --header \"X-HTTP-Method-Override: PATCH\" -d @${params.ActivationJsonFile} --location \"${params.InstanceURL}/ic/api/integration/v1/integrations/${integName}\""
                        bat(activateIntegrationCmd)
						echo "Integration Activated"
                        // Add your desired logic here
                    } else {
                        // Perform a different action when the checkbox is not checked
                        echo 'Checkbox is not checked'
                        // Add your desired logic here
						def deactivateIntegrationCmd = "curl --user ${params.Username}:${params.Password} --header \"Content-Type: application/json\" --header \"X-HTTP-Method-Override: PATCH\" -d @${params.DeactivationJsonFile} -d 'enableAsyncActivationMode=true' \"${params.InstanceURL}/ic/api/integration/v1/integrations/${integName}\""
                        bat(deactivateIntegrationCmd)
                        echo "Integration Configured"
                    }
                }
            }
        }
        // Add other stages as needed
       
        stage('New-Replace') {
            steps {
                script {
                    def selectedOption = "${params.Import_Method}".trim()
                    if (selectedOption == 'New') {
                        echo 'Performing new operation'
                        // Add your code for new operation here
                    } else if (selectedOption == 'Replace') {
                        echo 'Performing replace operation'
                        // Add your code for replace operation here
                    } else{
                        echo 'No operation selected'
                        // Add your code for no operation here or leave it blank
                    } 
                }
            }
        
		}

    }
}
